    %ECE-4784-Electrophysiology
    %==========================
    %Sanjay Ravi
    %Georgia Tech ECE 4784
    % simulation parameters
    height = 100; %I have to pick a right value for this :(
    T_final = 100;
    t = 0:(1/height):T_final; %ms

    % constants
    g_K = 36; % mS/cm^2
    g_Na = 120;
    g_L = 0.3;
    E_K = -12; %mV
    E_Na = 115;
    E_L = 10.6;
    V_rest = -70;
    %V_m = -70;
    C_m = 1; %uF

    V_m = zeros([1,T_final/height]);

    Alpha_m = zeros([1,T_final/height]);
    Beta_m = zeros([1,T_final/height]);
    Alpha_n = zeros([1,T_final/height]);
    Beta_n = zeros([1,T_final/height]);
    Alpha_h = zeros([1,T_final/height]);
    Beta_h = zeros([1,T_final/height]);

    delta_m = zeros([1,T_final/height]);
    delta_n = zeros([1,T_final/height]);
    delta_h = zeros([1,T_final/height]);

    I = 0;
    I_Na = zeros([1,T_final/height]);
    I_K = zeros([1,T_final/height]);
    I_L = zeros([1,T_final/height]);
    I_ion = zeros([1,T_final/height]);

    m = zeros([1,T_final/height]);
    n = zeros([1,T_final/height]);
    h = zeros([1,T_final/height]);

    % Initial Values
    V_m(1) = -70;
    disp(V_m(1))
    Alpha_m(1) = 0.1 * ((25-V_m(1))/(exp((25-V_m(1))/10) - 1));
    disp(Alpha_m(1))
    Beta_m(1) = 4* exp(-V_m(1)/18);
    disp(Beta_m(1))
    Alpha_n(1) = .01 * ((10-V_m(1))/(exp((10-V_m(1))/10) - 1));
    disp(Alpha_n(1))
    Beta_n(1) = .125 * exp(-V_m(1)/80);
    disp(Beta_n(1))
    Alpha_h(1) = .07 * exp(-V_m(1)/20);
    disp(Alpha_h(1))
    Beta_h(1) = 1/(exp((30-V_m(1))/10) + 1);
    disp(Beta_h(1))

    m(1) = Alpha_m(1) /(Alpha_m(1) + Beta_m(1));
    disp(m(1))
    n(1) = Alpha_n(1) /(Alpha_n(1) + Beta_n(1));
    disp(n(1))
    h(1) = Alpha_h(1) /(Alpha_h(1) + Beta_h(1));
    disp(n(1))

    I_Na(1) = m(1)^3 * g_Na * h(1) * (V_m(1)-E_Na);
    disp(I_Na(1))
    I_K(1) = n(1)^4 * g_K * (V_m(1)-E_K);
    disp(I_K(1))
    I_L(1) = g_L * (V_m(1)-E_L);
    disp(I_L(1))
    I_ion(1) = I-I_K(1)-I_Na(1)-I_L(1);
    disp(I_ion(1))


    % Basically Im trying to make it as array because it is shooting me memory
    % error



    for t = 1:t/height
     

    Alpha_m(t+1) = 0.1 * ((25-V_m(t))/(exp((25-V_m(t))/10) - 1));
    Beta_m(t+1) = 4* exp(-V_m(t)/18);
    Alpha_n(t+1) = .01 * ((10-V_m(t))/(exp((10-V_m(t))/10) - 1));
    Beta_n(t+1) = .125 * exp(-V_m(t)/80);
    Alpha_h(t+1) = .07 * exp(-V_m(t)/20);
    Beta_h(t+1) = 1/(exp((30-V_m(t))/10) + 1);

    m(t+1) = Alpha_m(t+1) *(1-m(t))-Beta_m(t+1) * m(t);
    n(t+1) = Alpha_n(t+1) * (1-n(t))-Beta_n(t+1) * n(t);
    h(t+1) = Alpha_h(t+1) * (1-h(t))-Beta_h(t+1) * h(t);

    I_Na(t+1) = m(t+1)^3 * g_Na * h * (V_m(t)-E_Na);
    I_K(t+1) = n(t+1)^4 * g_K * (V_m(t)-E_K);
    I_L(t+1) = g_L(t+1) * (V_m(t)-E_L);
    I_ion(t+1) = I-I_K(t+1)-I_Na(t+1)-I_L(t+1);
    
    V_m(t+1) = I_ion(t+1)/C_m;


    V_m(t+1) = V_m(t) + step * V_m(t+1);

    end
    
    plot(t,V_m)
